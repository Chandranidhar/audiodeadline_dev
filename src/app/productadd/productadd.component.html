<div class="container-fluid dashboard_body">
  <div class="dashboard_wrappertop"><img src="../../assets/images/logo.png"></div>
  <div class="row rowmaindiv">
    <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 dashboard_left">
      <app-adminleft></app-adminleft>
    </div>
    <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12 dashboard_right">
      <div class="dashboard_right_wrapper">
        <div class="dashboard1_div1">
          <h4> Add Product</h4>
          <div class="dashboard1form">

            <form [formGroup]="createProductForm" (ngSubmit)="createProductFormSubmit()">

              <div class="row">
                <!-- Product name -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Name*:</label>
                    <mat-form-field>
                        <input class="form-control" matInput placeholder="Product name" formControlName="name">
                    </mat-form-field>

                    <!-- name error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.name.touched && createProductFormValidate.name.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.name.errors.required">Title field is required.</div>
                        <div *ngIf="createProductFormValidate.name.errors.maxlength">Title field cannot contain more than 100 characters!</div>
                    </div>
                  </div>    
                </div>
                <!-- Product name end -->

                <!-- Category -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Category*:</label>
                    <mat-form-field>
                        <select matNativeControl formControlName="category">
                            <option value="">Select parent category</option>
                            <option *ngFor="let category of categoryList" value="{{ category._id }}">{{ category.title }}</option>
                        </select>
                    </mat-form-field>

                    <!-- Category error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.category.touched && createProductFormValidate.category.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.category.errors.required">Title field is required.</div>
                    </div>
                  </div>    
                </div>
                <!-- Category end -->
              </div>

              <div class="row">
                <!-- featured image -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Featured image*:</label>

                    <input type="file" (change)="onImageChange($event)" class="form-control" formControlName="featuredImage" accept="image/*" />
                    
                    <!-- Price error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.featuredImage.touched && createProductFormValidate.featuredImage.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.featuredImage.errors.required">Please select Featured Image.</div>
                    </div>

                    <!-- Progress bar -->
                    <mat-progress-bar *ngIf="featuredImage.featuredImageProgress == true" mode="determinate" value="{{ featuredImage.progressBar }}"></mat-progress-bar>

                    <!-- view selected image -->
                    <div *ngIf="featuredImage.featuredImageView == true">
                      <div class="row">
                        <div class="col-md-12">
                          <img src="http://developmentapi.audiodeadline.com/nodeserver/uploads/test/{{ featuredImage.featuredImageName }}" class="img-thumbnail" />
                        </div>
                      </div>
                    </div>
                  </div>    
                </div>
                <!-- featured image end -->

                <!-- others image -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Others images*:</label>

                    <input type="file" formControlName="othersImage" (change)="onOthersChange($event)" class="form-control" accept="image/*" />
                    
                    <!-- Price error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.othersImage.touched && createProductFormValidate.othersImage.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.othersImage.errors.required">Please select others image.</div>
                    </div>

                    <!-- view selected image -->
                    <div *ngIf="othersImage != '' && othersImage.length > 0">
                      <div class="row">
                        <div *ngFor="let image of othersImage; let i = index" class="col-md-4">
                          <img *ngIf="image.progressBar == 100" src="{{ image.othersImageName }}" class="img-thumbnail" alt="Uploading..." (click)="deleteOthersImage(i)" />
                          <div *ngIf="image.progressBar != 100" style="text-align: center;"><i class="fa fa-refresh fa-6x" aria-hidden="true"></i></div>
                          <mat-progress-bar mode="determinate" *ngIf="image.progressBar != 100" value="{{ image.progressBar }}"></mat-progress-bar>
                        </div>
                      </div>
                    </div>
                  </div>    
                </div>
                <!-- others image end -->
              </div>

              <!-- Product description -->
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label>Description*:</label>

                    <mat-form-field class="example-full-width">
                        <textarea matInput placeholder="Product description" class="form-control" formControlName="description"></textarea>
                    </mat-form-field>
                    
                    <!-- Product description error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.description.touched && createProductFormValidate.description.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.description.errors.required">Description field is required.</div>
                        <div *ngIf="createProductFormValidate.description.errors.maxlength">Description field cannot contain more than 1000 characters!</div>
                    </div>
                  </div>    
                </div>
              </div>
              <!-- Product description end -->

              <!-- Product price -->
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group">
                    <label>Price*:</label>

                    <mat-form-field class="example-full-width">
                        <input type="number" matInput placeholder="Product price" class="form-control" formControlName="price">
                    </mat-form-field>
                    
                    <!-- Price error message -->
                    <div style="color: red;" *ngIf="createProductFormValidate.price.touched && createProductFormValidate.price.errors" class="invalid-feedback">
                        <div *ngIf="createProductFormValidate.price.errors.required">Price field is required.</div>
                        <div *ngIf="createProductFormValidate.price.errors.max">Price value not more than 1 Billion!</div>
                    </div>
                  </div>    
                </div>
              </div>
              <!-- Product price end -->

              <!-- Attribute -->
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label>Attribute*:</label>

                    <mat-form-field>
                        <select matNativeControl formControlName="attribute" (change)="changeAttribute()">
                            <option value="">-- Select --</option>
                            <option value="size">Size</option>
                            <option value="color">Color</option>
                        </select>
                    </mat-form-field>
                  </div>
                </div>

                <ng-container *ngIf="showDiv">
                  <div class="col-md-6">
                    <div class="form-group">
                      <mat-form-field class="example-full-width">
                        <input matInput placeholder=" Value" formControlName="attributeValue">
                      </mat-form-field>

                      <button type="button" mat-button (click)="addAttribute()">Save</button>
                    </div>
                  </div>
                </ng-container>
              </div>
              <!-- Attribute end -->

              <!-- attributes added list -->
              <div class="row" *ngIf="attributes.length > 0">
                <div class="col-md-6">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Value</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let attribute of attributes; let i = index">
                          <td>{{ attribute.name }}</td>
                          <td>{{ attribute.value }}</td>
                          <td><button type="button" mat-button (click)="deleteAttribute(i)">Delete</button></td>
                        </tr>
                      </tbody>
                  </table>
                </div>
              </div>
              <!-- attributes added list end -->

              <input type="submit" name="submit" value="SUBMIT" class="loginbtn2">
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="clearfix"></div>
</div>